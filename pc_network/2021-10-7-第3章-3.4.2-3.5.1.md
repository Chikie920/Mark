### 3.4.2-流水线可靠数据传输协议

rdt3.0是一个停等协议，必须等待已发送分组的ACK到达后才能继续发送，信道利用率非常低

利用率 = (L/R)/(RTT+L/R)    L/R为分组传输时间

解决方法：使用流水线技术，发送多个分组后再等待确认

解决流水线的分组丢失、损坏、乱序、时延过长有两种方法，都是使用重传机制

- 回退N步GBN
- 选择重传SR



### 3.4.3-回退N 步

允许发送方发送多个分组（当有多个分组可用时）而不需等待确认，但已发送未确认的分组不能超过窗口长度N，超过则需要等待确认

基序号：最早未确认分组的序号

下一个序号：最小未使用序号

如果序号字段长度为kbits，则表示范围为[0, 2^k-1]，大于则mod2^k

![network_3_12](C:\Users\Mirai\Desktop\Work\Mark\Sources\images\network_3_12.png)

