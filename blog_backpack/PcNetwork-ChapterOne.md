---
title: PcNetwork_ChapterOne
date: 2021-10-24 16:53:35
tags: [Network]
coments: true
---

# 第1章-计算机网络和因特网



## 1.1-什么是因特网

有两种方式回答：

- 其一， 描述因特网的具体构成， 即构成因特网的基本硬件和软件组件
- 其二， 根据为分布式应用提供服务的联网基础设施来描述因特网



### 1.1.1-具体构成描述

**主机**或**端系统**：与因特网相连的便携机、智能手机、平板电脑、电视、游戏机、服务器等

**端系统**通过**通信链路**和**分组交换机**连接到一起，通信链路由不同类型的物理媒体组成

**物理媒体**：同轴电缆、铜线、光纤和无线电频谱

链路的**传输速率**：比特/秒(bit/s, 或bps) 

**分组**：发送端系统将数据分段并加上首部字节封装成分组

**分组交换机**分为两种：**链路层交换机(位于接入网中)、路由器(位于网络核心)**

**因特网服务提供商(ISP)：**为端系统提供因特网接入，ISP是互联的

**RFC(请求评论)：**包含了关于因特网的几乎所有重要的文字资料



### 1.1.2-服务描述

**分布式应用程序：**涉及多个相互交换数据的端系统上的应用程序

**套接字接口(socket api)：**端系统上的应用程序使用的网络接口



### 1.1.3-什么是协议

**协议(protocol)：** 定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和/或接收一条报文或其他事件所采取的动作



## 1.2-网络边缘

桌面计算机（桌面PC 、Mac 和Linux 设备） 、服务器（Web 和电子邮件服务器）和移动计算机（ 便携机、智能手机和平板电脑）等都被称为端系统，因为其**存在于因特网边缘**

端系统也称为主机，因为它们运行应用程序，主机=端系统

**网络边缘：**主机、应用程序(客户端、服务器)

**接入网：**物理媒体、有线、无线链路

**网络核心：**互联的路由、网络的网络



### 1.2.1-接入网

**接入网：**将端系统物理连接到其**边缘路由器**的网络。边缘路由器是端系统到任何其他远程端系统的路径上的第一台路由器。



#### 1 . 家庭接人： DSL 、电缆、FTTH 、拨号和卫星

**数字用户线接入(DSL)：**由当地的电话公司作为ISP，使用**电话线**（**双绞铜线**）接入

![network_1](/images/network_1_1.png)

- 家庭电话与PC共用一条电话线
- **DSL调制解调器**将PC发送的数字信号转化为能在电话线上传输的模拟信号，将接收的模拟信号转化为数字信号

- **分配器**将电话信号与模拟信号分流
- **DSLAM**将电话信号与模拟信号分流、将模拟信号转化为数字信号发往因特网



**电缆因特网接入：**由于混合使用了同轴电缆与光纤被称为**混合光纤同轴**(**HFC**) **系统**，有本地的有线电视公司提供接入

与DSL类似，不过使用的是**电缆调制解调器**与**电缆调制解调器端接系统(CMTS)**与DSLAM类似

![network_1_2](/images/network_1_2.png)





**光纤到户(FTTH)：**本地中心局提供光纤接入因特网

![network_1_3](/images/network_1_3.png)

- **光纤网络端接器(ONT)：**俗称光猫，是一种调制解调器，提供数字与光信号的转换
- **光纤分配器：**将连接到各家庭的光纤集结到一根共享的光纤
- **光纤线路端接器(OLT)：**提供了光信号和电信号之间的转换，经过本地电话公司路由器与因特网相连



#### 2. 企业（和家庭）接人：以太网和WiFi

#### 3. 广域无线接人： 3G 和LTE



### 1.2.2-物理媒体

物理媒体分为两种

- 导引型媒体：电波沿着固体媒体前行，如光缆、双绞铜线或同轴电缆
- 非导引型媒体：电波在空气或外层空间中传播，例如无线局域网或数字卫星频道



#### 双绞铜线

- 最便宜并且最常用的导引型传输媒体，一直用于电话网

- 双绞线由两根绝缘的铜线组成，这两根线被绞合起来以减少电气干扰

- 6a 类电缆能够达到10Gbps 的数据传输速率，双绞线最终已经作为高速LAN 联网的主导性解决方案



#### 同轴电缆

- 由两个铜导体组成，但是这两个导体是同心的

- 同轴电缆能够达到较高的数据传输速率，在电缆电视系统中相当普遍



#### 光纤

- 光纤是一种细而柔软的、能够导引光脉冲的媒体，每个脉冲表示一个比特
- 一根光纤能够支持极高的比特速率，高达数十甚至数百Gbps ，它们不受电磁干扰，很难窃听，使得光纤成为长途导引型传输媒体



#### 陆地无线电信道

- 无线电信道承载电磁频谱中的信号

陆地无线电信道能够大致划分为三类： 

- 运行在很短距离（如1 米或2 米），个人设备如无线头戴式耳机、键盘和医疗设备跨短距离运行

- 运行在局域，通常跨越数十到几百米，无线LAN 技术使用了局域无线电信道

- 第三类运行在广域，跨越数万米，蜂窝接入技术使用了广域无线电信道



#### 卫星无线电信道



## 1.3-网络核心

即由互联因特网端系统的分组交换机和链路构成的网状网络

换句话说就是由路由器和与其相连的链路组成的网状的网络



### 1.3.1-分组交换

端系统彼此交换**报文**，从源端系统向目的端系统发送一个报文、源将长报文划分为较小的数据块，称之为**分组**



#### 存储转发传输

多数分组交换机使用存储转发传输机制，即接收完一个分组后才能转发它

当有多个分组传入时，当前一个分组存储时，后面的分组需要等待，当前一个分组开始传输时，后面的分组不受影响



#### 排队时延和分组丢失

- 每台分组交换机有多条链路与之相连。对于每条相连的链路，该分组交换机具有一个**输出缓存**(也称为**输出队列**) , 它用于存储路由器准备发往那条链路的分组

- 如果到达的分组需要传输到某条链路， 但发现该链路正忙于传输其他分组，该到达分组必须在输出缓存中等待，等待的时间为**排队时延**

- 缓存空间的大小是有限的，当队列已满时，新到达的分组或已经排队的分组之一将被丢弃，称为**分组丢失**（**丢包**）



#### 转发表和路由选择协议

**转发：**将输入链路的数据传输到合适的输出链路

在转发前需要根据传入分组首部的目的IP地址查找转发表得到合适的输出链路



**路由选择协议：**用于自动地设置这些转发表。一个路由选择协议可以决定从每台路由器到每个目的地的最短路径，并使用这些最短路径结果来配置路由器中的转发表。



### 1.3.2-电路交换

通过网络链路和交换机移动数据有两种基本方法：**电路交换**和**分组交换**

- 电路交换通常被传统电话使用
- 相当于去餐馆之前需要电话预定，在通信前会预留通信资源(带宽)并在通信时保持恒定的传输速率，保证了通信质量



#### **电路交换网络中的复用**

**频分复用-FDM**

- 链路的频谱由跨越链路创建的所有连接共享

- 在连接期间链路为每条连接专用一个频段。在电话网络中，这个频段的宽度通常为4kHz (即每秒4000 周期），频段的宽度称为带宽

**时分复用-TDM**

- 时间被划分为固定期间的帧，并且每个帧又被划分为固定数量的时隙，当网络跨越一条链路创建一条连接时，网络在每个帧中为该连接指定一个时隙，这些时隙专门由该连接单独使用进行数据传输

![network_1_4](/images/network_1_4.png)



电路交换能保证通信质量但是其通信资源利用率不高，一对占用通信链路的用户可能并没有通信



#### 分组交换与电路交换的对比

对于分组交换

- 它的端到端时延是可变的和不可预测的

- 但它提供了比电路交换更好的带宽共享，它比电路交换更简单、更有效，实现
  成本更低。



电路交换不考虑需求，而预先分配了传输链路的使用，这使得已分配而并不需要的链路时间未被利用。

另一方面，分组交换按需分配链路使用。链路传输能力将在所有需要在链路上传输分组的用户之间逐分组地被共享。



### 1.3.3-网络的网络

**接入ISP：**接入ISP 不必是电信局或电缆公司，相反，它能够是如大学或公司

**区域ISP：**提供区域因特网接入

**多宿：**一个接入ISP 可能与两个区域ISP 多宿，既可以与两个区域ISP 多宿，也可以与一个第一层ISP 多宿。当一个ISP 多宿时，即使它的提供商之一出现故障，它仍然能够继续发送和接收分组。

**对等：**位千相同等级结构层次的邻近一对ISP 能够对等。能够直接将它们的网络连到一起，使它们之间的所有流矗经直接连接而不是通过上游的中间ISP传输。当两个ISP 对等时，通常不进行结算，即任一个ISP 不向其对等付费

**因特网交换点-IXP：**IXP 是一个汇合点，多个ISP能够在这里一起对等

**内容提供商网络：**只提供内容，内容可可以放在任何地方，只要能接入互联网

![network_1_5](/images/network_1_5.png)



## 1.4-分组交换网中的时延、丢包和吞吐量



### 1.4.1-分组交换网中的时延概述

**节点处理时延** 、**排队时延** 、**传输时延**和**传播时延**, 这些时延总体累加起来是**节点总时延**



#### 处理时延

检查分组首部和决定将该分组导向何处所需要的时间是处理时延的一部分，还包括差错检测等



#### 排队时延

当分组在链路上等待传输时，它经受排队时延



#### 传输时延

即分组在路由器中转发数据的时间，当两个路由器进行传输分组时，传输时延只计算发送或接收时延，因为当一方发送时相对于另一方是接收



#### 传播时延

即分组在链路中传递的时间



### 1.4.2-排队时延和丢包

**a** 表示分组到达队列的平均速率(单位是分组/秒，即pkt/s)

**R** 是传输速率，即从队列中推出比特的速率（以bps即b/s 为单位）

假定所有分组都是由L比特组成的

比特到达队列的平均速率是La bps

比率La/R 被称为**流量强度**

流量强度大于1时，排队时延趋近无穷

![network_1_6](/images/network_1_6.png)



### 1.4.4-计算机网络中的吞吐量

**瞬时吞吐量：**相当于使用某网盘时显示的速度

**平均吞吐量：**相当于平均速度

**瓶颈链路：**两个通信的端系统数据传输链路上，速率最小的一条链路

![network_1_7](/images/network_1_7.png)

a) 吞吐量为min{Rs, Rc}



- 目前因特网的核心的确超量配置了高速率的链路，从而很少出现拥塞
- 在今天因特网中对吞吐量的限制因素通常是接入网

- 当没有其他干扰流量时，其吞吐量能够近似为沿着源和目的地之间路径的最小传输速率



## 1.5-协议层次及其服务模型



### 1.5.1-分层的体系结构

- 网络设计者以分层的方式组织协议以及实现这些协议的网络硬件和软件

- 每一层可使用其特定的服务(协议)或借用下层提供的服务来向上层提供服务，即一层能提供的服务可能是由其与其下层共同提供的

- 一个协议层能够用软件、硬件或两者的结合来实现



因特网的协议栈由5个层次组成：物理层、链路层、网络层、运输层和应用层



#### 应用层

- 网络应用程序及它们的应用层协议存留的地方

- 协议包括HTTP、SMTP、FTP、DNS

- 应用层的信息分组称为**报文**



#### 运输层

- 运输层在应用程序端点之间传送应用层报文，两种运输协议，TCP 和UDP

- 输层的分组称为**报文段**



#### 网络层

- 网络层负责将称为**数据报**的网络层分组从一台主机移动到另一台主机

- 网络层包括著名的网际协议IP



#### 链路层

- 网络层将数据报下传给链路层，链路层沿着路径将数据报传递给下一个节点。在下一个节点，链路层将数据报上传给网络层

- 链路层分组称为**帧**



#### 物理层

- 物理层的任务是将该帧中的一个个比特从一个节点移动到下一个节点
- 有许多物理层协议分别关于：双绞铜线、同轴电缆、光纤



### 1.5.2-封装

路由器和链路层交换机并不实现协议栈中的所有层次

- 路由器仅实现网络层、链路层、物理层
- 链路层交换机仅实现链路层、物理层



**封装**

一个应用层报文被传送给运输层，运输层收取到报文并附上**附加信息(允许接收端运输层向上向适当的应用程序交付报文的信息； 差错检测位信息，该信息让接收方能够判断报文中的比特是否在途中已被改变)**，应用层报文和运输层首部信息一道构成了运输层报文段，运输层报文段因此封装了应用层报文。运输层则向网络层传递该报文段，增加了如源和目的端系统地址等网络层首部信息生成了网络层数据报。报接下来被传递给链路层，增加它自己的链路层首部信息并生成链路层帧。

在每一层，一个分组具有两种类型的字段： 首部字段和有效载荷字段。

有效载荷通常是来自上一层的分组。



![network_1_8](/images/network_1_8.png)



## 1.6-面对攻击的网络



**病毒**：是一种需要某种形式的用户交互来感染用户设备的恶意软件

**蠕虫**：是一种无须任何明显用户交互就能进入设备的恶意软件

