---
title: CSAPP-ChapterOne
coments: true
date: 2021-10-24 17:02:42
tags: [CSAPP]
---

# 第一章-计算机系统漫游



## 1.1-信息就是位+上下文

大部分的现代计算机系统都使用**ASCII标准**来表示文本字符

**文本文件**：只由ASCII字符构成的文件

其他的都为**二进制文件**



## 1.2-程序被其他程序翻译成不同的格式

`hello.c`的生命周期

![csapp_1_1](/images/csapp_1_1.png)

**编译系统：**预处理器、编译器、汇编器和链接器共同构成

**预处理器：**执行宏等操作

**编译器：**将高级语言转换为低级汇编语言

**汇编器：**将汇编语言转换为机器语言

**链接器：**合并C库内的预编译的目标文件



## 1.3-了解编译系统如何工作是大有益处的

- 优化程序性能
- 理解链接时出现的错误(函数链接错误)
- 避免安全漏洞(缓冲区溢出)



## 1.4-处理器读并解释储存在内存中的指令



### 1.4.1-系统的硬件组成

**总线：**贯穿系统的电子管道，能够携带信息字节在各部件间传递

**I/O设备：**系统与外部世界的联系通道(键盘、鼠标、显示器、磁盘等)；每个I/O 设备都通过一个控制器或适配器与I/O 总线相连。

**主存：**临时存储设备

- 逻辑上是一个线性的字节数组，每个字节都有其唯一的地址(从0开始)

- 物理上由一组**动态随机存取存储器(DRAM)**芯片组成

**处理器：**CPU，解释（或执行）存储在主存中指令的引擎

- 核心：大小为一个字的存储设备-程序计数器(PC)，任何时刻，PC 都指向主存中的某条机器语言指令（即含有该条指令的地址）
- 寄存器文件
- 算术/逻辑单元(ALU)



- **加载**：从主存复制一个字节或者一个字到寄存器，以覆盖寄存器原来的内容

- **存储**：从寄存器复制一个字节或者一个字到主存的某个位置，以覆盖这个位置上原来的内容
- **操作**：把两个寄存器的内容复制到ALU, ALU 对这两个字做算术运算，并将结果存放到一个寄存器中，以覆盖该寄存器中原来的内容
- **跳转**：从指令本身中抽取一个字，并将这个字复制到程序计数器(PC)中，以覆盖PC中原来的值



### 1.4.2-运行hello程序



shell读取命令，将其复制到寄存器文件中，再存放到主存中

![csapp_1_3](/images/csapp_1_3.png)

回车后，shell结束读取并执行一系列指令来加载可执行的hello文件

从磁盘中读取源文件，复制到主存中

![csapp_1_4](/images/csapp_1_4.png)

加载完成后处理器就开始执行hello 程序，将“hello, world’ 字符串中的字节从主存复制到寄存器文件，再从寄存器文件中复制到显示设备，最终显示在屏幕上

![csapp_1_5](/images/csapp_1_5.png)



## 1.5-高速缓存至关重要

**高速缓存存储器**（cache memory, 简称为**cache**或高速缓存）

**静态随机访问存储器**（**SRAM**)



## 1.6-存储设备形成层次结构

![csapp_1_6](/images/csapp_1_6.png)



**存储器层次结构的主要思想是上一层的存储器作为低一层存储器的高速缓存**



## 1.7-操作系统管理硬件

![csapp_1_7](/images/csapp_1_7.png)



操作系统有两个基本功能：

- 防止硬件被失控的应用程序滥用

- 向应用程序提供简单一致的机制来控制复杂而又通常大
  不相同的低级硬件设备



### 1.7.1-进程

操作系统会提供一种假象，就好像系统上只有这个程序在运行。程序看上去是独占地使用处理器、主存和I/O 设备

**进程**：是操作系统对一个正在运行的程序的一种抽象，在一个系统上可以同时运行多个进程，而每个进程都好像在独占地使用硬件

**并发运行**：一个进程的指令和另一个进程的指令是交错执行的

**上下文**：进程运行所需的所有状态信息

**上下文切换**：保存当前进程的上下文、恢复新进程的上下文，然后将控制权传递到新进程，新进程就会从它上次停止的地方开始

**操作系统内核**：内核是操作系统代码常驻主存的部分，是系统管理全部进程所用代码和数据结构的集合



### 1.7.2-线程

一个进程实际上可以由多个称为线程的执行单元组成，每个线程都运行在进程的上下文中，并共享同样的代码和全局数据



### 1.7.3-虚拟内存

![csapp_1_8](/images/csapp_1_8.png)



### 1.7.4-文件

计算机系统一切皆文件



## Amdahl 定律

当我们对系统的某个部分加速时，其对系统整体性能的影响取决于该部分的重要性和加速程度

主要观点—— 要想显著加速整个系统，必须提升全系统中相当大的部分的速度



### 并发和并行

- 线程级并发
- 指令级并行
- 单指令、多数据并行



### 计算机系统中抽象的重要性



![csapp_1_9](/images/csapp_1_9.png)

