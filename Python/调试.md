## 11.1 - 抛出异常

我们可以在代码中抛出自己的异常

抛出异常使用 `raise`语句，包含以下部分

- `raise`关键词
- 对Exception()函数的调用
- 传递给Exception()函数的字符串，包含错误信息



```python
raise Exception('This is a RunTimeError')

'''
This is a RunTimeError
  File "C:\Users\Mirai\Desktop\Work\Local_Space\Python\test.py", line 1, in <module>
    raise Exception('This is a RunTimeError')
'''
```



```python
print('input a number:')
number = int(input())
try:
    if number < 0:
        raise Exception('It\'s too small')
except Exception as erro:
    print('An error is happen: ', str(erro))
    
'''
input a number:
-1
An error is happen:  It's too small
'''
```

当错误发生时被`except`捕捉，错误信息被保存到`erro`变量中



## 11.2 - 取得回溯字符串

python遇到错误，它会生成一些错误信息(问题代码行号)，称为回溯

引入 `traceback` 模块，使用 `traceback.format_exc()`函数得到回溯的字符串形式



## 11.3 - 断言

**断言**是程序健全性检查，用于确保程序没有做什么明显错误的事情，如果检查失败，就会抛出异常

`assert`包含以下部分：

- `assert`关键字
- 条件
- 逗号
- 当条件为`False`时显示的字符串

```python
assert 1 < 0 , '1不小于0'

'''
发生异常: AssertionError
1不小于0
  File "C:\Users\Mirai\Desktop\Work\Local_Space\Python\test.py", line 1, in <module>
    assert 1 < 0 , '1不小于0'
'''
```



## 11.4 - 日志

`logging`模块可以很容易创建自定义的消息记录



### 11.4.1 - 使用logging模块

```python
import logging

logging.basicConfig(level=logging.DEBUG, format='%(asctime)s - %(levelname)s - %(message)s')
logging.debug('Start of program')

result = 1
for i in range(1, 5):
    result *= i
    logging.debug('i is '+str(i)+' total is '+str(result))
print(result)
logging.debug('End of program')

'''
2021-07-04 21:12:33,745 - DEBUG - Start of program
2021-07-04 21:12:33,746 - DEBUG - i is 1 total is 1
2021-07-04 21:12:33,746 - DEBUG - i is 2 total is 2
2021-07-04 21:12:33,746 - DEBUG - i is 3 total is 6
2021-07-04 21:12:33,746 - DEBUG - i is 4 total is 24
24
2021-07-04 21:12:33,747 - DEBUG - End of program
'''
```

使用了`logging.debug()`函数，这个debug()函数将调用`basicConfig()`函数以输出一行信息，格式在该函数其中



### 11.4.3 - 日志级别

提供了一种方式按重要性对日志进行分类

| 级别         | 何时使用                                                     | 日志函数               |
| ------------ | ------------------------------------------------------------ | ---------------------- |
| **DEBUG**    | **调试信息，也是最详细的日志信息**                           | **logging.debug()**    |
| **INFO**     | **证明事情按预期工作**                                       | **logging.info()**     |
| **WARNING**  | **表明发生了一些意外，或不久的将来会发生问题（如 磁盘满了），软件还是正常工作** | **logging.warning()**  |
| **ERROR**    | **由于更严重的问题，软件已经不能执行一些工作了**             | **logging.error()**    |
| **CRITICAL** | **严重错误，表明软件已经不能继续运行了**                     | **logging.critical()** |



### 11.4.4 - 禁用日志

使用`logging.disable()`**禁用相应级别和比该级别低的日志**

`logging.disable(logging.INFO)`禁用INFO级别及以下的日志



### 11.4.5 - 将日志记录到文件

`logging.basicConfig()`函数还接收f`ilename`关键字参数

示例`logging.basicConfig(filename='log.txt', level=logging.DEBUG, format='%(asctime)s - %(levelname)s - %(message)s')`

